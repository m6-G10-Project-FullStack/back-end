// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id          String    @id
  email       String    @unique
  name        String
  cpf         String
  phone       String
  birthday    DateTime
  description String
  is_seller   Boolean   @default(false)
  password    String
  cep         String
  state       String
  city        String
  street      String
  number      String
  complement  String
  cars        Car[]
  comments    Comment[]

  @@map("users")
}

model Car {
  id          String    @id
  year        Int
  fuel        String
  km          Int
  color       String
  fipe        Decimal
  price       Decimal
  is_promo    Boolean
  description String
  is_active   Boolean   @default(false)
  User        User?     @relation(fields: [userId], references: [id])
  userId      String?
  comments    Comment[]
  photos      Galery[]
  Brand       Brand?    @relation(fields: [brandId], references: [id])
  brandId     Int?
  Model       Model?    @relation(fields: [modelId], references: [id])
  modelId     Int?
  
  @@map("cars")
}

model Comment {
  id      String  @id
  comment String
  User    User?   @relation(fields: [userId], references: [id])
  userId  String?
  Car     Car?    @relation(fields: [carId], references: [id])
  carId   String?

  @@map("comments")
}

model Galery {
  id         Int    @id
  photo_link String

  Car   Car?    @relation(fields: [carId], references: [id])
  carId String?

  @@map("galeries")
}

model Brand {
  id     Int     @id
  name   String
  cars   Car[]
  models Model[]

  @@map("brands")
}

model Model {
  id      Int    @id
  name    String
  cars    Car[]
  Brand   Brand? @relation(fields: [brandId], references: [id])
  brandId Int?

  @@map("models")
}
